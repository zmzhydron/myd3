<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		#testspan{
			color: lime;
		}
		.hehe{
			width: 500px;
			height: 200px;
			border: solid 1px red;
			padding: 10px;
		}
		.green{
			fill: green;
		}
		.red{
			fill: red;
		}
	</style>
	<script src="d3main.js"></script>
</head>
<body>
	<div class="a" id='a'>aaa</div>
	<div class="a">aaa</div>
	<div class="a">aaa</div>
	<div class="a">aaa</div>
	<div class="a">aaa</div>
</body>
<script type="text/javascript">
	let data1 = ['my','name','is','zhangmingzhi'];
	let data2 = ['zmz'];

	document.addEventListener('DOMContentLoaded', event => {
		//add svg
		let rectHeight = 50;
    function makebar(){
      let data3 = Array.from({length: 10}).map( item => ~~(Math.random() * 1000));
	  // let Xscale = d3.scaleLinear().domain([0,10]).range([10,490]);
	  // let Yscale = d3.scaleLinear().domain([d3.max(data3),0]).range([10,190]);
		// let scale = d3.scaleLinear().domain([0,d3.max(data3)]).range([10,190]);
		let Xscale = d3.scaleLinear().domain([0,d3.max(data3)]).range([10,490]);
		let Yscale = d3.scaleLinear().domain([0,10]).range([10,190]);
		let scale = d3.scaleLinear().domain([0,d3.max(data3)]).range([10,400]);
		// let Xaxis = d3.axisBottom(d3.scaleLinear().domain([1,10]).range([10,490]));
		let Xaxis = d3.axisBottom(Xscale).ticks(10);
	  let svg = d3.select("body")
	  	.append('svg')
			.attr("class","hehe");
		svg.selectAll("rect")
		.data(data3).enter().append("rect")
		.attr("x", (item ,index) => 10)
		.attr("y", (item, index) => Yscale(index))
		.attr("width", item => Xscale(item))
		.attr("height", 16)
		.attr("data-value", item => item+" @")
		.attr("fill", (item) => Math.random() > 0.5 ? "red" : "green");
		svg.append("g").attr("transform","translate(0,190)").call(Xaxis);
		svg.selectAll(".textbox").data(data3).enter().append("text")
		.attr("class","text")
		.attr("x", item => Xscale(item) - 20)
		.attr("y", (item,index) => Yscale(index))
		.attr('dy', 14)
		.attr('dx', 9)
		.text(item => item)

    }

    makebar();
	},false)
</script>
</html>
